<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/styles.css">
    <title>Admin Dashboard</title>
    <style>
        img.large {
            width: 200px;
            height: 200px;
        }
    </style>
</head>
<body>
    <div class="w-screen h-screen p-2">

        <!-- Top Bar -->
        <div class="h-20 mb-2 bg-gray-600 flex flex-row justify-between items-center p-4">
            <div class="text-xl text-white">
                Leave Management System
            </div>

            <div class="flex flex-row items-center gap-2">
                <div class="h-10 w-10 rounded-full bg-white">
                </div>
                <div class="text-xl text-white ">
                    Amani Adam
                </div>
            </div>
        </div>
        <!-- End Top Bar -->

        <div class="w-full flex h-full">

            <!-- Side Bar -->
            <div class="w-1/5 bg-gray-600 h-full p-2">
                <button id="dashboardButton" class="text-white bg-black w-full flex justify-start px-2 py-5 mb-1">Dashboard</button>
                <button id="leaveFormButton" class="text-white bg-black w-full flex justify-start px-2 py-5 mb-1">Pending Leave Requests</button>
                <button id="leaveBreakdownButton" class="text-white bg-black w-full flex justify-start px-2 py-5 mb-1">Leave Breakdown</button>
            </div>
            <!-- End Sidebar -->

            <!-- Dashboard Content -->
            <div id="dashboardContent" class="w-4/5 h-full bg-sky-200 p-5 hidden">

                <div class="flex items-center gap-5 bg-slate-50 shadow-2xl rounded-lg">
                    <img src="/assets/workers.png" alt="#" class="large" style="object-fit: cover;position: relative;">
                    <div class="flex flex-col gap-1">
                        <div class="text-2xl">Welcome back..</div>
                        <div class="text-3xl">Amani Adam</div>
                        <div class="text-xl">Your dedication to the organization is highly appreciated</div>
                    </div>
                </div>

                <div class="w-full mt-5 flex gap-5">
                    <div class="w-1/3 bg-white rounded-lg shadow-lg p-4 h-96">
                        <div class="text-center font-bold mb-5">Department Heads</div>

                        <!-- Staff item -->
                        <div class="flex items-center gap-5 mt-2">
                            <div class="h-14 w-14 rounded-full bg-sky-300"></div>
                            <div>
                                <div class=" bg-sky-100 text-sky-700 rounded-xl text-sm h-5 w-7 flex items-center justify-center">ICT</div>
                                <div class="">Salma Risase</div>
                                <div class="text-sm text-gray-400">amanijr101@gmail.com</div>
                            </div>
                        </div>
                        <!-- End Staff item -->

                        <!-- Staff item -->
                        <div class="flex items-center gap-5 mt-2">
                            <div class="h-14 w-14 rounded-full bg-sky-300"></div>
                            <div>
                                <div class=" bg-sky-100 text-sky-700 rounded-xl text-sm h-5 w-7 flex items-center justify-center">BUI</div>
                                <div class="">Magreth Fransis</div>
                                <div class="text-sm text-gray-400">maggie101@gmail.com</div>
                            </div>
                        </div>
                        <!-- End Staff item -->

                        <!-- Staff item -->
                        <div class="flex items-center gap-5 mt-2">
                            <div class="h-14 w-14 rounded-full bg-sky-300"></div>
                            <div>
                                <div class=" bg-sky-100 text-sky-700 rounded-xl text-sm h-5 w-7 flex items-center justify-center">BME</div>
                                <div class="">Allen Mosha</div>
                                <div class="text-sm text-gray-400">mosha01@gmail.com</div>
                            </div>
                        </div>
                        <!-- End Staff item -->
                        
                    </div>

                    <div class="w-1/3 bg-white rounded-lg shadow-lg flex items-center justify-center h-96">
                        <div class="w-64 h-64 rounded-full bg-sky-200 flex flex-col items-center justify-center">
                            <div>
                                Days a Leave is Allowed
                            </div>
                            <div class="text-xl font-bold">
                                28
                            </div>
                        </div>
                    </div>

                    <div class="w-1/3 bg-white rounded-lg shadow-lg p-4 h-96">
                        <div class="text-center font-bold mb-5">Fellow Staffs</div>

                        <!-- Staff item -->
                        <div class="flex items-center gap-5 mt-2">
                            <div class="h-14 w-14 rounded-full bg-sky-300"></div>
                            <div>
                                <div class=" bg-sky-100 text-sky-700 rounded-xl text-sm h-5 w-7 flex items-center justify-center">ICT</div>
                                <div class="">Adam Fransis</div>
                                <div class="text-sm text-gray-400">adamjr101@gmail.com</div>
                            </div>
                        </div>
                        <!-- End Staff item -->

                        <!-- Staff item -->
                        <div class="flex items-center gap-5 mt-2">
                            <div class="h-14 w-14 rounded-full bg-sky-300"></div>
                            <div>
                                <div class=" bg-sky-100 text-sky-700 rounded-xl text-sm h-5 w-7 flex items-center justify-center">ICT</div>
                                <div class="">Rose Kimambo</div>
                                <div class="text-sm text-gray-400">rossie101@gmail.com</div>
                            </div>
                        </div>
                        <!-- End Staff item -->

                        <!-- Staff item -->
                        <div class="flex items-center gap-5 mt-2">
                            <div class="h-14 w-14 rounded-full bg-sky-300"></div>
                            <div>
                                <div class=" bg-sky-100 text-sky-700 rounded-xl text-sm h-5 w-7 flex items-center justify-center">ICT</div>
                                <div class="">Jullieth Mosha</div>
                                <div class="text-sm text-gray-400">jully111@gmail.com</div>
                            </div>
                        </div>
                        <!-- End Staff item -->
                        
                    </div>

                </div>

            </div>
            <!-- End Dashboard Content -->

            <!-- Leave List -->
            <div id="leaveForm" class="w-4/5 h-full bg-sky-200 p-5 hidden">
                <div class="p-4 text-center text-xl font-bold">PENDING LEAVE REQUESTS</div>
                
                <!-- Row component -->
                <div class="w-full flex justify-between p-4 bg-slate-300">
                    <div class="font-bold">STAFF NAME</div>
                    <div class="font-bold">LEAVE TYPE</div>
                    <div class="font-bold">APPLIED DATE</div>
                    <div class="font-bold">STATUS</div>
                    <div>ACTION</div>
                </div>
                <!-- End row component -->

                <% if (PendingRequests.length === 0) { %>
                    <div class="p-4 text-center italic text-red-900">No Pending requests</div>
                    <% } else { %>
                    <% let counter = 1; %>
                    <% PendingRequests.forEach(request => { %>
                            <!-- Row component -->
                        <div class="w-full flex justify-between p-4 bg-slate-300">
                            <div><%= counter %>. Love Adam</div>
                            <div>Casual Type</div>
                            <div><%= request.request_date %></div>
                            <div class="text-red-500">Pending</div>
                            <button class="bg-blue-400 text-sm px-4">a/d</button>
                        </div>
                        <!-- End row component -->
                        <% counter++; %>
                    <% }) %>
                <% } %>
                
            </div>
            <!-- End Leave List -->

            <!-- Leave Breakdown -->
            <div id="leaveBreakdown" class="w-4/5 h-full bg-sky-200 p-5">

                <div class="flex items-center gap-5 w-full h-44 p-4">

                    <div class="w-1/4 bg-white h-[70%] flex justify-between items-center">
                        <div class="px-4">
                            <div class="font-extrabold"><%= totalNumberOfRequests %></div>
                            <div class="font-bold">Leaves (All)</div>
                        </div>
                        <div class="bg-sky-400 h-full w-[40%]"></div>
                    </div>

                    <div class="w-1/4 bg-white h-[70%] flex justify-between items-center">
                        <div class="px-4">
                            <div class="font-extrabold"><%= PendingRequests.length %></div>
                            <div class="font-bold">Leaves (Pending)</div>
                        </div>
                        <div class="bg-orange-400 h-full w-[40%]"></div>
                    </div>

                    <div class="w-1/4 bg-white h-[70%] flex justify-between items-center">
                        <div class="px-4">
                            <div class="font-extrabold"><%= RejectedRequests.length %></div>
                            <div class="font-bold">Leaves (Rejected)</div>
                        </div>
                        <div class="bg-yellow-400 h-full w-[40%]"></div>
                    </div>

                    <div class="w-1/4 bg-white h-[70%] flex justify-between items-center">
                        <div class="px-4">
                            <div class="font-extrabold"><%= ApprovedRequests.length %></div>
                            <div class="font-bold">Leaves (Approved)</div>
                        </div>
                        <div class="bg-cyan-400 h-full w-[40%]"></div>
                    </div>

                </div>

                <div class="w-full mt-5 flex gap-5">

                    <div class="w-full bg-white rounded-lg shadow-lg flex items-center justify-center h-96">
                        <div class="w-64 h-64 rounded-full bg-sky-200 flex flex-col items-center justify-center">
                            <div>
                                Total number of staffs
                            </div>
                            <div class="text-xl font-bold">
                                <%= totalNumberOfEmployees %>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
            <!-- End Leave Break Down  -->

        </div>

    </div>
</body>
<script>
    const leaveForm = document.querySelector("#leaveForm")
    const dashboardContent = document.querySelector("#dashboardContent")
    const dashboardButton = document.querySelector("#dashboardButton")
    const leaveFormButton = document.querySelector("#leaveFormButton") 
    const leaveBreakdown = document.querySelector("#leaveBreakdown")
    const leaveBreakdownButton = document.querySelector("#leaveBreakdownButton")

    dashboardButton.addEventListener("click", ( event ) => {
        event.preventDefault()
        leaveForm.classList.add("hidden")
        leaveBreakdown.classList.add("hidden")
        dashboardContent.classList.remove("hidden")
    })

    leaveFormButton.addEventListener("click", ( event ) => {
        event.preventDefault()
        dashboardContent.classList.add("hidden")
        leaveBreakdown.classList.add("hidden")
        leaveForm.classList.remove("hidden")
    })

    leaveBreakdownButton.addEventListener("click", ( event ) => {
        event.preventDefault()
        dashboardContent.classList.add("hidden")
        leaveForm.classList.add("hidden")
        leaveBreakdown.classList.remove("hidden")
    })

</script>
</html>